input {
  kafka {
    bootstrap_servers => "192.168.253.129:9092"
    topics => ["xmlt_fast", "xmlt", "csv"]
    auto_offset_reset => "latest"  
    codec => json {
      target => "[event]"  
    }
    consumer_threads => 3  
    decorate_events => true
  }
}


filter {
  mutate {
    add_field => { 
      "kafka_topic" => "%{[@metadata][kafka][topic]}" 
    }
  }
}

output {
  if [kafka_topic] == "xmlt_fast" {
    elasticsearch {
      hosts => ["192.168.253.129:9200"]
      index => "filesxmlonly" 
    }
  }
  else if [kafka_topic] == "xmlt" {
    elasticsearch {
      hosts => ["192.168.253.129:9200"]
      index => "filesgziphere"
    }
  }
  else if [kafka_topic] == "csv" {
    elasticsearch {
      hosts => ["192.168.253.129:9200"]
      index => "filescsv"
    }
  }
}
